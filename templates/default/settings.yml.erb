defaults: &defaults
  hostname: <%= @params[:hostname] %>
  useragent: <%= @params[:useragent] %>
  api_key: <%= @params[:api_key] %>
  notification_email: <%= @params[:notification_email] %>
  rest_auth_site_key: <%= @params[:auth_site_key] %>
  rest_auth_digest_stretches: 10
  secret_token: <%= @params[:secret_token] %>
  persona: <%= @params[:persona] %>
  cas_url: <%= @params[:cas_url] %>
  cas_login_url: <%= @params[:cas_login_url] %>/login
  cas_logout_url: <%= @params[:cas_prefix] %>/logout
  cas_service_validate_url: <%= @params[:cas_prefix] %>/serviceValidate
  workers: <%= @params[:workers] %>
  couchdb_url: <%= @params[:couchdb_url] %>/
  doi_prefix: <%= @params[:doi_prefix] %>
  import: <%= @params[:import] %>
  uid: <%= @params[:uid] %>
  mail:
    address: <%= @params[:mail][:address] %>
    port: <%= @params[:mail][:port] %>
    domain: <%= @params[:mail][:domain] %>

development:
  <<: *defaults

test:
  <<: *defaults
  api_key: 12345
  notification_email: alm@alm.example.org
  cas_url: https://example.org
  workers: 1
  couchdb_url: <%= @params[:couchdb_url] %>_test/
  doi_prefix: <%= @params[:doi_prefix] %>

production:
  <<: *defaults
